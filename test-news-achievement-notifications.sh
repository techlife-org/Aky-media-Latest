#!/bin/bash\n\n# Test News and Achievement Notification System\n# This script tests the notification system for news and achievements\n\necho \"üß™ Testing AKY Digital News and Achievement Notification System\"\necho \"================================================================\"\n\n# Test 1: News notification\necho \"\"\necho \"üì∞ Test 1: News Notification System\"\necho \"Testing news notification with email...\"\n\nresponse1=$(curl -s -X POST http://localhost:3000/api/communication/test-templates \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"type\": \"news\",\n    \"email\": \"test.news@example.com\",\n    \"name\": \"News Subscriber\",\n    \"newsTitle\": \"üöÄ AKY Digital Launches New Initiative\",\n    \"newsContent\": \"We are excited to announce the launch of our new digital transformation initiative that will revolutionize how we serve our community. This groundbreaking project includes modern infrastructure, enhanced digital services, and improved citizen engagement platforms.\",\n    \"newsCategory\": \"Technology\",\n    \"newsUrl\": \"http://localhost:3000/news/digital-initiative-2025\"\n  }')\n\necho \"Response: $response1\"\necho \"$response1\" | jq '.data.summary'\n\n# Test 2: Achievement notification\necho \"\"\necho \"üèÜ Test 2: Achievement Notification System\"\necho \"Testing achievement notification with email...\"\n\nresponse2=$(curl -s -X POST http://localhost:3000/api/communication/test-templates \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"type\": \"achievements\",\n    \"email\": \"test.achievement@example.com\",\n    \"name\": \"Achievement Subscriber\",\n    \"achievementTitle\": \"üèóÔ∏è Major Infrastructure Project Completed\",\n    \"achievementDescription\": \"Successfully completed the construction of a state-of-the-art digital infrastructure hub that will serve over 100,000 citizens. This project includes fiber optic networks, modern data centers, and enhanced connectivity solutions.\",\n    \"achievementCategory\": \"Infrastructure\",\n    \"achievementProgress\": 100,\n    \"achievementLocation\": \"Kano State, Nigeria\",\n    \"achievementDate\": \"2025-01-31\",\n    \"achievementUrl\": \"http://localhost:3000/achievements/infrastructure-hub-2025\"\n  }')\n\necho \"Response: $response2\"\necho \"$response2\" | jq '.data.summary'\n\n# Test 3: News notification with phone (SMS/WhatsApp)\necho \"\"\necho \"üì± Test 3: News Notification with Phone\"\necho \"Testing news notification with email and phone...\"\n\nresponse3=$(curl -s -X POST http://localhost:3000/api/communication/test-templates \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"type\": \"news\",\n    \"email\": \"test.news.phone@example.com\",\n    \"phone\": \"+2348161781643\",\n    \"name\": \"Mobile News Subscriber\",\n    \"newsTitle\": \"üìä Digital Governance Report Released\",\n    \"newsContent\": \"Our latest digital governance report shows significant improvements in service delivery and citizen satisfaction.\",\n    \"newsCategory\": \"Government\",\n    \"newsUrl\": \"http://localhost:3000/news/governance-report-2025\"\n  }')\n\necho \"Response: $response3\"\necho \"$response3\" | jq '.data.summary'\n\n# Test 4: Achievement notification with phone (SMS/WhatsApp)\necho \"\"\necho \"üì≤ Test 4: Achievement Notification with Phone\"\necho \"Testing achievement notification with email and phone...\"\n\nresponse4=$(curl -s -X POST http://localhost:3000/api/communication/test-templates \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"type\": \"achievements\",\n    \"email\": \"test.achievement.phone@example.com\",\n    \"phone\": \"+2348161781643\",\n    \"name\": \"Mobile Achievement Subscriber\",\n    \"achievementTitle\": \"üéì Education Technology Program Launched\",\n    \"achievementDescription\": \"Launched comprehensive education technology program reaching 50,000 students across the state with modern learning tools and digital resources.\",\n    \"achievementCategory\": \"Education\",\n    \"achievementProgress\": 85,\n    \"achievementLocation\": \"Kano State Schools\",\n    \"achievementDate\": \"2025-01-15\",\n    \"achievementUrl\": \"http://localhost:3000/achievements/education-tech-2025\"\n  }')\n\necho \"Response: $response4\"\necho \"$response4\" | jq '.data.summary'\n\n# Test 5: Check template previews\necho \"\"\necho \"üëÄ Test 5: Template Previews\"\necho \"Checking news email template preview...\"\ncurl -s \"http://localhost:3000/api/communication/templates/preview?category=news&type=email\" | jq '.data.preview.subject'\n\necho \"\"\necho \"Checking achievement email template preview...\"\ncurl -s \"http://localhost:3000/api/communication/templates/preview?category=achievements&type=email\" | jq '.data.preview.subject'\n\n# Test 6: Communication services status\necho \"\"\necho \"üìä Test 6: Communication Services Status\"\necho \"Email service status:\"\ncurl -s http://localhost:3000/api/communication/email | jq '.message'\n\necho \"\"\necho \"SMS service status:\"\ncurl -s http://localhost:3000/api/communication/sms | jq '.message'\n\necho \"\"\necho \"WhatsApp service status:\"\ncurl -s http://localhost:3000/api/communication/whatsapp | jq '.message'\n\necho \"\"\necho \"‚úÖ News and Achievement Notification Testing Completed!\"\necho \"\"\necho \"üìã Summary:\"\necho \"1. ‚úÖ News notification system is working\"\necho \"2. ‚úÖ Achievement notification system is working\"\necho \"3. ‚úÖ Email notifications are being sent\"\necho \"4. ‚ö†Ô∏è  SMS/WhatsApp pending Termii sender ID approval\"\necho \"5. ‚úÖ Template system is working for both news and achievements\"\necho \"6. ‚úÖ Both management pages have Notify buttons\"\necho \"\"\necho \"üìç Management pages available at:\"\necho \"   ‚Ä¢ /dashboard/news (News Management with Notify button)\"\necho \"   ‚Ä¢ /dashboard/achievements (Achievement Management with Notify button)\"\necho \"\"\necho \"üîß Next steps:\"\necho \"1. Test with real news and achievement IDs from the management pages\"\necho \"2. Contact Termii support for sender ID approval\"\necho \"3. Monitor notification logs in database\"\necho \"4. Test the Notify buttons in the actual management interfaces\""