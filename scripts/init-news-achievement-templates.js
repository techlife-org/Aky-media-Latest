#!/usr/bin/env node\n\nconst { MongoClient } = require('mongodb');\nrequire('dotenv').config();\n\nasync function initializeTemplates() {\n  const client = new MongoClient(process.env.MONGODB_URI);\n  \n  try {\n    await client.connect();\n    const db = client.db(process.env.MONGODB_DB);\n    const collection = db.collection('communication_templates');\n\n    console.log('ğŸ¨ Initializing News and Achievement Templates...');\n\n    // News templates\n    const newsTemplates = [\n      {\n        name: 'AKY Digital News Email',\n        category: 'news',\n        type: 'email',\n        subject: 'ğŸ“° {{news_title}} - The AKY Digital Team',\n        content: `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>{{news_title}} - AKY Digital</title>\n</head>\n<body style=\"margin: 0; padding: 0; background-color: #f8fafc; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\">\n  <div style=\"max-width: 600px; margin: 0 auto; background: #ffffff; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n    <div style=\"background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); padding: 40px 30px; text-align: center; color: white;\">\n      <h1 style=\"margin: 0; font-size: 32px; font-weight: 700;\">ğŸ“° Latest News Update</h1>\n      <p style=\"margin: 15px 0 0 0; font-size: 18px; opacity: 0.95;\">The AKY Digital Team</p>\n    </div>\n    \n    <div style=\"padding: 50px 40px; background: white;\">\n      <div style=\"margin-bottom: 40px;\">\n        <h2 style=\"color: #1f2937; margin: 0 0 20px 0; font-size: 24px;\">Dear {{name}},</h2>\n        \n        <p style=\"color: #374151; line-height: 1.7; margin: 0 0 20px 0; font-size: 16px;\">\n          We have exciting news to share with you!\n        </p>\n        \n        <div style=\"background: #f8fafc; padding: 25px; border-radius: 10px; margin: 35px 0; border: 1px solid #e5e7eb;\">\n          <h3 style=\"color: #1f2937; margin: 0 0 15px 0; font-size: 20px;\">{{news_title}}</h3>\n          <p style=\"color: #4b5563; margin: 5px 0; line-height: 1.6;\">{{news_content}}</p>\n          <div style=\"margin-top: 15px;\">\n            <span style=\"background: #dc2626; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px; text-transform: capitalize;\">{{news_category}}</span>\n          </div>\n        </div>\n        \n        <p style=\"color: #374151; line-height: 1.7; margin: 0; font-size: 16px;\">\n          Best regards,<br>\n          <strong>The AKY Digital Team</strong>\n        </p>\n      </div>\n      \n      <div style=\"text-align: center; margin: 40px 0;\">\n        <a href=\"{{news_url}}\" style=\"display: inline-block; padding: 16px 32px; background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); color: white; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 16px;\">\n          ğŸ“– Read Full Article\n        </a>\n      </div>\n    </div>\n    \n    <div style=\"background: #f8fafc; padding: 30px; text-align: center; border-top: 1px solid #e5e7eb;\">\n      <p style=\"color: #6b7280; font-size: 14px; margin: 0 0 15px 0;\">Â© {{current_year}} AKY Digital. All rights reserved.</p>\n      <a href=\"{{unsubscribe_url}}\" style=\"color: #dc2626; text-decoration: none; font-size: 13px;\">Unsubscribe</a>\n    </div>\n  </div>\n</body>\n</html>\n        `,\n        variables: ['name', 'news_title', 'news_content', 'news_category', 'news_url', 'current_year', 'unsubscribe_url'],\n        isActive: true,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      },\n      {\n        name: 'AKY Digital News SMS',\n        category: 'news',\n        type: 'sms',\n        content: `ğŸ“° {{news_title}} - The AKY Digital Team\n\nDear {{name}},\n\nWe have exciting news to share! {{news_content}}\n\nCategory: {{news_category}}\n\nRead more: {{news_url}}\n\nBest regards,\nThe AKY Digital Team`,\n        variables: ['name', 'news_title', 'news_content', 'news_category', 'news_url'],\n        isActive: true,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      },\n      {\n        name: 'AKY Digital News WhatsApp',\n        category: 'news',\n        type: 'whatsapp',\n        content: `ğŸ“° *{{news_title}}*\n\nDear *{{name}}*,\n\nWe have exciting news to share with you! ğŸ‰\n\n{{news_content}}\n\nğŸ“‚ *Category:* {{news_category}}\n\nğŸ”— Read the full article: {{news_url}}\n\nBest regards,\n*The AKY Digital Team*`,\n        variables: ['name', 'news_title', 'news_content', 'news_category', 'news_url'],\n        isActive: true,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      }\n    ];\n\n    // Achievement templates\n    const achievementTemplates = [\n      {\n        name: 'AKY Digital Achievement Email',\n        category: 'achievements',\n        type: 'email',\n        subject: 'ğŸ† {{achievement_title}} - The AKY Digital Team',\n        content: `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>{{achievement_title}} - AKY Digital</title>\n</head>\n<body style=\"margin: 0; padding: 0; background-color: #f8fafc; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\">\n  <div style=\"max-width: 600px; margin: 0 auto; background: #ffffff; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n    <div style=\"background: linear-gradient(135deg, #059669 0%, #047857 100%); padding: 40px 30px; text-align: center; color: white;\">\n      <h1 style=\"margin: 0; font-size: 32px; font-weight: 700;\">ğŸ† New Achievement</h1>\n      <p style=\"margin: 15px 0 0 0; font-size: 18px; opacity: 0.95;\">The AKY Digital Team</p>\n    </div>\n    \n    <div style=\"padding: 50px 40px; background: white;\">\n      <div style=\"margin-bottom: 40px;\">\n        <h2 style=\"color: #1f2937; margin: 0 0 20px 0; font-size: 24px;\">Dear {{name}},</h2>\n        \n        <p style=\"color: #374151; line-height: 1.7; margin: 0 0 20px 0; font-size: 16px;\">\n          We're excited to share a significant achievement with you!\n        </p>\n        \n        <div style=\"background: #f0fdf4; padding: 25px; border-radius: 10px; margin: 35px 0; border: 1px solid #d1fae5;\">\n          <h3 style=\"color: #1f2937; margin: 0 0 15px 0; font-size: 20px;\">{{achievement_title}}</h3>\n          <p style=\"color: #4b5563; margin: 5px 0 15px 0; line-height: 1.6;\">{{achievement_description}}</p>\n          \n          <div style=\"margin: 15px 0;\">\n            <p style=\"color: #4b5563; margin: 5px 0;\"><strong>Category:</strong> {{achievement_category}}</p>\n            <p style=\"color: #4b5563; margin: 5px 0;\"><strong>Location:</strong> {{achievement_location}}</p>\n            <p style=\"color: #4b5563; margin: 5px 0;\"><strong>Date:</strong> {{achievement_date}}</p>\n            <p style=\"color: #4b5563; margin: 5px 0;\"><strong>Progress:</strong> {{achievement_progress}}%</p>\n          </div>\n          \n          <div style=\"background: #e5e7eb; height: 8px; border-radius: 4px; margin: 15px 0;\">\n            <div style=\"background: #059669; height: 8px; border-radius: 4px; width: {{achievement_progress}}%;\"></div>\n          </div>\n        </div>\n        \n        <p style=\"color: #374151; line-height: 1.7; margin: 0; font-size: 16px;\">\n          Best regards,<br>\n          <strong>The AKY Digital Team</strong>\n        </p>\n      </div>\n    </div>\n    \n    <div style=\"background: #f8fafc; padding: 30px; text-align: center; border-top: 1px solid #e5e7eb;\">\n      <p style=\"color: #6b7280; font-size: 14px; margin: 0 0 15px 0;\">Â© {{current_year}} AKY Digital. All rights reserved.</p>\n      <a href=\"{{unsubscribe_url}}\" style=\"color: #dc2626; text-decoration: none; font-size: 13px;\">Unsubscribe</a>\n    </div>\n  </div>\n</body>\n</html>\n        `,\n        variables: ['name', 'achievement_title', 'achievement_description', 'achievement_category', 'achievement_location', 'achievement_date', 'achievement_progress', 'current_year', 'unsubscribe_url'],\n        isActive: true,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      },\n      {\n        name: 'AKY Digital Achievement SMS',\n        category: 'achievements',\n        type: 'sms',\n        content: `ğŸ† {{achievement_title}} - The AKY Digital Team\n\nDear {{name}},\n\nWe're excited to share a significant achievement! {{achievement_description}}\n\nCategory: {{achievement_category}}\nLocation: {{achievement_location}}\nProgress: {{achievement_progress}}%\nDate: {{achievement_date}}\n\nBest regards,\nThe AKY Digital Team`,\n        variables: ['name', 'achievement_title', 'achievement_description', 'achievement_category', 'achievement_location', 'achievement_progress', 'achievement_date'],\n        isActive: true,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      },\n      {\n        name: 'AKY Digital Achievement WhatsApp',\n        category: 'achievements',\n        type: 'whatsapp',\n        content: `ğŸ† *{{achievement_title}}*\n\nDear *{{name}}*,\n\nWe're excited to share a significant achievement with you! ğŸ‰\n\n{{achievement_description}}\n\nğŸ“‚ *Category:* {{achievement_category}}\nğŸ“ *Location:* {{achievement_location}}\nğŸ“… *Date:* {{achievement_date}}\nğŸ“Š *Progress:* {{achievement_progress}}%\n\nBest regards,\n*The AKY Digital Team*`,\n        variables: ['name', 'achievement_title', 'achievement_description', 'achievement_category', 'achievement_location', 'achievement_progress', 'achievement_date'],\n        isActive: true,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      }\n    ];\n\n    // Insert news templates\n    for (const template of newsTemplates) {\n      const existing = await collection.findOne({ \n        category: template.category, \n        type: template.type, \n        name: template.name \n      });\n      \n      if (!existing) {\n        await collection.insertOne(template);\n        console.log(`âœ… Created ${template.category} ${template.type} template`);\n      } else {\n        console.log(`âš ï¸  ${template.category} ${template.type} template already exists`);\n      }\n    }\n\n    // Insert achievement templates\n    for (const template of achievementTemplates) {\n      const existing = await collection.findOne({ \n        category: template.category, \n        type: template.type, \n        name: template.name \n      });\n      \n      if (!existing) {\n        await collection.insertOne(template);\n        console.log(`âœ… Created ${template.category} ${template.type} template`);\n      } else {\n        console.log(`âš ï¸  ${template.category} ${template.type} template already exists`);\n      }\n    }\n\n    console.log('\\nğŸ‰ News and Achievement templates initialization completed!');\n    \n  } catch (error) {\n    console.error('âŒ Error initializing templates:', error);\n  } finally {\n    await client.close();\n  }\n}\n\ninitializeTemplates();\n"