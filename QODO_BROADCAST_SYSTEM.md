# Qodo Broadcast Management System\n\nA comprehensive live broadcasting system designed for Governor Abba Kabir Yusuf's media center, featuring Google Meet-like functionality with advanced broadcast management capabilities.\n\n## 🚀 Features\n\n### Broadcast Admin Management\n- ✅ Separate authentication system for broadcast administrators\n- ✅ Role-based permissions (broadcast_admin, super_admin)\n- ✅ Secure login with JWT tokens and HTTP-only cookies\n- ✅ Admin profile management with customizable settings\n- ✅ Automatic redirect to broadcast dashboard after login\n\n### Enhanced Broadcast Dashboard\n- ✅ Real-time video/audio streaming with WebRTC\n- ✅ Camera and microphone controls\n- ✅ Screen sharing functionality\n- ✅ Live participant management\n- ✅ Real-time chat moderation\n- ✅ Broadcast analytics and statistics\n- ✅ Customizable broadcast settings\n- ✅ Unique shareable broadcast links generation\n\n### Google Meet-like Participant Experience\n- ✅ Join broadcasts via unique links\n- ✅ Audio/video viewing capabilities\n- ✅ Interactive live chat\n- ✅ Emoji reactions and engagement features\n- ✅ Real-time participant list\n- ✅ Connection quality monitoring\n- ✅ Mobile-responsive interface\n\n### Technology Stack\n- ✅ **WebRTC** for real-time peer-to-peer communication\n- ✅ **Socket.io** for real-time messaging and signaling\n- ✅ **MongoDB** for data persistence\n- ✅ **Next.js 14** with App Router\n- ✅ **TypeScript** for type safety\n- ✅ **Tailwind CSS** for responsive design\n- ✅ **Radix UI** for accessible components\n\n## 📁 Project Structure\n\n```\n├── app/\n│   ├── api/\n│   │   ├── broadcast-admin/\n│   │   │   └── auth/\n│   │   │       ├── login/route.ts\n│   │   │       ├── register/route.ts\n│   │   │       ├── logout/route.ts\n│   │   │       └── verify/route.ts\n│   │   └── broadcast/\n│   │       ├── enhanced-start/route.ts\n│   │       ├── enhanced-chat/route.ts\n│   │       └── ...\n│   ├── broadcast-admin/\n│   │   └── login/page.tsx\n│   ├── dashboard/\n│   │   └── broadcast/\n│   │       └── enhanced/page.tsx\n│   └── live/\n│       └── enhanced/page.tsx\n├── components/\n│   ├── enhanced-broadcast-dashboard.tsx\n│   ├── enhanced-live-broadcast-client.tsx\n│   └── ...\n├── lib/\n│   ├── webrtc.ts (Enhanced WebRTC service)\n│   ├── enhanced-socket-server.ts\n│   └── ...\n├── models/\n│   └── BroadcastAdmin.ts\n└── scripts/\n    └── init-broadcast-admin.js\n```\n\n## 🛠️ Installation & Setup\n\n### 1. Environment Variables\n\nAdd the following to your `.env` file:\n\n```env\n# Existing variables...\nJWT_SECRET=your-super-secret-jwt-key-here\nMONGODB_URI=your-mongodb-connection-string\nNEXT_PUBLIC_BASE_URL=https://your-domain.com\n```\n\n### 2. Install Dependencies\n\nThe required dependencies are already included in the existing `package.json`:\n\n```bash\nnpm install\n# or\nyarn install\n```\n\n### 3. Initialize Default Broadcast Admin\n\nRun the initialization script to create a default broadcast administrator:\n\n```bash\nnode scripts/init-broadcast-admin.js\n```\n\nThis will create:\n- **Email**: `admin@akymediacenter.com`\n- **Password**: `BroadcastAdmin2024!`\n- **Role**: `super_admin`\n\n⚠️ **Important**: Change the default password after first login!\n\n### 4. Start the Development Server\n\n```bash\nnpm run dev\n# or\nyarn dev\n```\n\n## 🎯 Usage Guide\n\n### For Broadcast Administrators\n\n1. **Login**\n   - Navigate to `/broadcast-admin/login`\n   - Use the default credentials or your assigned credentials\n   - You'll be redirected to the enhanced broadcast dashboard\n\n2. **Start a Broadcast**\n   - Go to `/dashboard/broadcast/enhanced`\n   - Configure broadcast settings (title, description, permissions)\n   - Click \"Start Broadcast\" to begin streaming\n   - Share the generated meeting link with participants\n\n3. **Manage Participants**\n   - View real-time participant list\n   - Mute or remove participants as needed\n   - Monitor chat messages and moderate content\n   - View broadcast analytics and statistics\n\n### For Participants/Viewers\n\n1. **Join a Broadcast**\n   - Click on the shared broadcast link\n   - Enter your name to join as a viewer\n   - Enjoy the live stream with interactive features\n\n2. **Participate**\n   - Watch live video and audio\n   - Send messages in the live chat\n   - React with emojis and expressions\n   - See other participants in real-time\n\n## 🔧 API Endpoints\n\n### Broadcast Admin Authentication\n- `POST /api/broadcast-admin/auth/login` - Admin login\n- `POST /api/broadcast-admin/auth/register` - Create new admin\n- `POST /api/broadcast-admin/auth/logout` - Admin logout\n- `GET /api/broadcast-admin/auth/verify` - Verify admin session\n\n### Enhanced Broadcast Management\n- `POST /api/broadcast/enhanced-start` - Start new broadcast\n- `POST /api/broadcast/stop` - Stop active broadcast\n- `GET /api/broadcast/status` - Get broadcast status\n- `POST /api/broadcast/join` - Join broadcast as participant\n\n### Chat & Reactions\n- `GET /api/broadcast/enhanced-chat` - Get chat history\n- `POST /api/broadcast/enhanced-chat` - Send message/reaction\n- `DELETE /api/broadcast/enhanced-chat` - Delete message (admin)\n\n## 🎨 UI Components\n\n### Enhanced Broadcast Dashboard\n- Real-time video preview with overlays\n- Media controls (camera, microphone, screen share)\n- Participant management panel\n- Live chat moderation\n- Broadcast statistics and analytics\n- System health monitoring\n\n### Enhanced Live Broadcast Client\n- Google Meet-like interface\n- Responsive design for all devices\n- Real-time participant list\n- Interactive chat with emoji reactions\n- Connection quality indicators\n- Floating reaction animations\n\n## 🔒 Security Features\n\n- **JWT Authentication** with HTTP-only cookies\n- **Role-based Access Control** (RBAC)\n- **Input Validation** and sanitization\n- **CORS Protection** with allowed origins\n- **Rate Limiting** on API endpoints\n- **Secure WebRTC** with STUN servers\n\n## 📊 Database Schema\n\n### BroadcastAdmin Collection\n```typescript\n{\n  id: string\n  email: string\n  password: string (hashed)\n  name: string\n  role: 'broadcast_admin' | 'super_admin'\n  permissions: {\n    canCreateBroadcast: boolean\n    canManageBroadcast: boolean\n    canViewAnalytics: boolean\n    canManageParticipants: boolean\n    canAccessChat: boolean\n  }\n  isActive: boolean\n  profile: {\n    avatar?: string\n    title?: string\n    department?: string\n  }\n  broadcastSettings: {\n    defaultTitle: string\n    maxParticipants: number\n    allowScreenShare: boolean\n    allowChat: boolean\n    allowReactions: boolean\n  }\n}\n```\n\n### BroadcastSession Collection\n```typescript\n{\n  id: string\n  adminId: string\n  title: string\n  description?: string\n  isActive: boolean\n  startedAt: Date\n  endedAt?: Date\n  meetingLink: string\n  participants: BroadcastParticipant[]\n  settings: {\n    maxParticipants: number\n    allowScreenShare: boolean\n    allowChat: boolean\n    allowReactions: boolean\n  }\n  stats: {\n    totalViewTime: number\n    peakViewers: number\n    chatMessages: number\n    reactions: number\n  }\n}\n```\n\n## 🚀 Deployment\n\n### Production Checklist\n\n1. **Environment Variables**\n   - Set strong `JWT_SECRET`\n   - Configure production `MONGODB_URI`\n   - Set correct `NEXT_PUBLIC_BASE_URL`\n\n2. **Security**\n   - Change default admin password\n   - Enable HTTPS in production\n   - Configure proper CORS origins\n   - Set up rate limiting\n\n3. **Performance**\n   - Enable MongoDB indexing\n   - Configure CDN for static assets\n   - Set up proper caching headers\n   - Monitor WebRTC connection quality\n\n### Vercel Deployment\n\n```bash\n# Install Vercel CLI\nnpm i -g vercel\n\n# Deploy\nvercel --prod\n```\n\n### Environment Variables for Production\n```env\nJWT_SECRET=your-production-jwt-secret\nMONGODB_URI=mongodb+srv://...\nNEXT_PUBLIC_BASE_URL=https://your-domain.com\nNODE_ENV=production\n```\n\n## 🔧 Troubleshooting\n\n### Common Issues\n\n1. **WebRTC Connection Issues**\n   - Check firewall settings\n   - Ensure STUN servers are accessible\n   - Verify camera/microphone permissions\n\n2. **Authentication Problems**\n   - Verify JWT_SECRET is set\n   - Check cookie settings in browser\n   - Ensure MongoDB connection is stable\n\n3. **Socket.io Connection Issues**\n   - Check network connectivity\n   - Verify WebSocket support\n   - Monitor server logs for errors\n\n### Debug Mode\n\nEnable debug logging by setting:\n```env\nDEBUG=socket.io*,webrtc*\n```\n\n## 📈 Analytics & Monitoring\n\nThe system provides comprehensive analytics:\n\n- **Real-time Metrics**\n  - Current viewer count\n  - Connection quality\n  - Chat activity\n  - Reaction engagement\n\n- **Historical Data**\n  - Peak viewer counts\n  - Average watch time\n  - Total broadcast duration\n  - Participant demographics\n\n## 🤝 Contributing\n\n1. Fork the repository\n2. Create a feature branch\n3. Make your changes\n4. Add tests if applicable\n5. Submit a pull request\n\n## 📄 License\n\nThis project is proprietary software developed for AKY Media Center.\n\n## 🆘 Support\n\nFor technical support or questions:\n- Create an issue in the repository\n- Contact the development team\n- Check the troubleshooting guide above\n\n---\n\n**Built with ❤️ for Governor Abba Kabir Yusuf's Media Center**"